---
import Layout from "@/layouts/Layout.astro";
import "@/styles/globals.css";
import { getCollection } from "astro:content";
import { Button } from "@/components/ui/button";
import { ArrowRight, Calendar, User, Globe } from "lucide-react";
import copy from "@/data/copy.json";
import Footer from "@/components/Footer.astro";

export async function getStaticPaths() {
  const panduan = await getCollection("panduan");
  return panduan.map((guide) => ({
    params: { slug: guide.slug },
    props: { guide },
  }));
}

const { guide } = Astro.props;
const { Content } = await guide.render();
---

<Layout>
  <main class="min-h-screen pt-24 flex flex-col">
    {/* Hero Section */}
    <section class="container mx-auto px-6 md:px-8 max-w-6xl mb-12">
      <div class="flex items-center gap-2 mb-6">
        <a href="/panduan" class="text-muted-foreground hover:text-primary text-sm transition-colors">panduan</a>
        <span class="text-muted-foreground text-sm">/</span>
        <span class="text-primary text-sm font-medium">{guide.data.category}</span>
      </div>
      
      <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-6">
        {guide.data.title}
      </h1>

      <div class="flex items-center gap-6 text-muted-foreground text-sm border-b pb-8">
        <div class="flex items-center gap-2">
          <User className="w-4 h-4" />
          <span>{guide.data.author}</span>
        </div>
        <div class="flex items-center gap-2">
          <Calendar className="w-4 h-4" />
          <span>{guide.data.pubDate.toLocaleDateString('id-ID', { year: 'numeric', month: 'long', day: 'numeric' })}</span>
        </div>
      </div>
    </section>

    {/* Content */}
    <article class="container mx-auto px-6 md:px-8 max-w-6xl prose prose-lg dark:prose-invert prose-headings:font-bold prose-headings:text-foreground prose-p:text-foreground prose-li:text-foreground prose-strong:text-foreground prose-a:text-primary hover:prose-a:text-primary/80 prose-img:rounded-lg mb-16">
      <div class="aspect-video w-full rounded-lg overflow-hidden mb-10 not-prose">
        <img 
          src={guide.data.image} 
          alt={guide.data.title} 
          class="w-full h-full object-cover"
        />
      </div>
      <Content />
    </article>

    {/* Soft CTA */}
    <section class="container mx-auto px-6 md:px-8 max-w-6xl mb-20">
      <div class="bg-white rounded-lg p-8 md:p-12 border text-center">
        <h2 class="text-2xl md:text-3xl font-bold mb-4">{copy.panduan.softCta.title}</h2>
        <p class="text-muted-foreground mb-8 max-w-xl mx-auto">
          {copy.panduan.softCta.description}
        </p>
        <a href="/remote-kits">
          <Button size="lg" variant="premium" className="gap-2">
            {copy.panduan.softCta.button} <ArrowRight className="w-4 h-4" />
          </Button>
        </a>
      </div>
    </section>

    <Footer />
  </main>
</Layout>
```
